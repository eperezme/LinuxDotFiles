/*! For license information please see popup.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={2921:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),n=o(9526),a=o(8444),r=o(4719),l=o(292),d=s.__importDefault(o(6397)),c=s.__importDefault(o(6749)),u=s.__importDefault(o(8289)),p=s.__importDefault(o(5144)),g=o(7190);class b{constructor(){this.cookieCount=0,this.tab=void 0,this.storeId="default"}}class x extends n.Component{constructor(){super(...arguments),this.state=new b,this.port=null}componentDidMount(){return s.__awaiter(this,void 0,void 0,(function*(){document.documentElement.style.fontSize=`${this.props.state.settings.sizePopup.value||16}px`,l.isChrome(this.props.state.cache)&&(document.documentElement.style.minWidth=430+35*((this.props.state.settings.sizePopup.value||16)-10)+"px");const e=yield browser.tabs.query({active:!0,currentWindow:!0});this.setState({storeId:l.parseCookieStoreId(this.props.contextualIdentities,e[0].cookieStoreId),tab:e[0]})}))}componentWillUnmount(){this.port&&(this.port.disconnect(),this.port=null)}setPopupCookieCount(){return s.__awaiter(this,void 0,void 0,(function*(){const{state:e}=this.props,{tab:t}=this.state;if(!t||!t.url)return;const o=yield l.getAllCookiesForDomain(e,t);this.setState({cookieCount:o?o.length-o.filter((e=>e.name===l.CADCOOKIENAME)).length:0})}))}render(){const{tab:e,storeId:t}=this.state;if(!e)return"Loading";const{onNewExpression:o,onCookieCleanup:s,onUpdateSetting:n,contextualIdentities:a,state:r}=this.props,{cache:b,settings:x}=r,m=l.getHostname(e.url),v=l.extractMainDomain(m),h=[m===v?void 0:`*.${v}`,m].filter(Boolean);return""===m||l.isAnIP(e.url)||m.startsWith("file:")||h.push(`*.${m}`),this.port||m&&(this.port=browser.runtime.connect({name:`popupCAD_${m},${t.replace(",","-")}`}),this.port.onMessage.addListener((e=>{const t=e;void 0!==t.cookieUpdated&&t.cookieUpdated&&this.setPopupCookieCount()})),this.port.onDisconnect.addListener((e=>{e.error&&console.error(`Disconnected due to an error: ${browser.runtime.lastError}`),this.port=null}))),i.jsxs("div",Object.assign({id:"cadPopup",className:"container-fluid",style:{overflow:"auto"},onClick:e=>{const t=e.target,o=document.getElementById("cleanCollapse");if(!o||!o.classList.contains("show"))return;const s=t.attributes.getNamedItem("data-target");s&&"#cleanCollapse"===s.value||o.classList.remove("show")}},{children:[i.jsxs("div",Object.assign({className:"row",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",justifyContent:"center",paddingTop:"8px"}},{children:[i.jsx("span",Object.assign({id:"CADTitle"},{children:browser.i18n.getMessage("extensionName")}),void 0)," ",i.jsx("span",Object.assign({id:"CADVersion",style:{fontWeight:"bold"}},{children:browser.runtime.getManifest().version}),void 0)]}),void 0),i.jsxs("div",Object.assign({className:"row justify-content-center",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",padding:"4px 4px 8px 4px"}},{children:[i.jsx(c.default,{iconName:"power-off",className:x.activeMode.value?"btn-success":"btn-danger",onClick:()=>n(Object.assign(Object.assign({},x.activeMode),{value:!x.activeMode.value})),title:x.activeMode.value?browser.i18n.getMessage("disableAutoDeleteText"):browser.i18n.getMessage("enableAutoDeleteText"),text:x.activeMode.value?browser.i18n.getMessage("autoDeleteEnabledText"):browser.i18n.getMessage("autoDeleteDisabledText")},void 0),i.jsx("div",{className:"w-100 py-1 d-sm-none"},void 0),i.jsx(c.default,{iconName:x.showNotificationAfterCleanup.value?"bell":"bell-slash",className:x.showNotificationAfterCleanup.value?"btn-success":"btn-danger",onClick:()=>n(Object.assign(Object.assign({},x.showNotificationAfterCleanup),{value:!x.showNotificationAfterCleanup.value})),title:browser.i18n.getMessage("toggleNotificationText"),text:x.showNotificationAfterCleanup.value?browser.i18n.getMessage("notificationEnabledText"):browser.i18n.getMessage("notificationDisabledText")},void 0),i.jsx("div",{className:"w-100 py-1 d-sm-none"},void 0),i.jsxs("div",Object.assign({id:"cleanButtonContainer",className:"btn-group",role:"group","aria-label":"Clean Actions Group",style:{margin:"0 4px"}},{children:[i.jsx(c.default,{iconName:"eraser",className:"btn-warning",type:"button",onClick:()=>{s({greyCleanup:!1,ignoreOpenTabs:!1}),g.animateFlash(document.getElementById("cleanButtonContainer"),!0)},title:browser.i18n.getMessage("cookieCleanupText"),text:browser.i18n.getMessage("cleanText")},void 0),i.jsx("button",Object.assign({"aria-controls":"cleanCollapse","aria-expanded":"false",className:"btn btn-warning dropdown-toggle dropdown-toggle-split","data-disabled":"true","data-target":"#cleanCollapse","data-toggle":"collapse",role:"button",style:{borderLeftColor:"rgb(176, 132, 0)",transform:"translate3d(-3px, 0px, 0px)"}},{children:i.jsx("span",Object.assign({className:"sr-only"},{children:browser.i18n.getMessage("dropdownAdditionalCleaningOptions")}),void 0)}),void 0)]}),void 0),i.jsx("div",{className:"w-100 py-1 d-sm-none"},void 0),i.jsx(c.default,{iconName:"cog",className:"btn-info",onClick:()=>{l.isFirefoxNotAndroid(b)?browser.tabs.create({cookieStoreId:e.cookieStoreId,index:e.index+1,url:"/settings/settings.html#tabSettings"}):browser.tabs.create({index:e.index+1,url:"/settings/settings.html#tabSettings"}),window.close()},title:browser.i18n.getMessage("preferencesText"),text:browser.i18n.getMessage("preferencesText")},void 0)]}),void 0),i.jsx(u.default,{hostname:m||"",tab:e},void 0),i.jsxs("div",Object.assign({className:"row no-gutters",style:{alignItems:"center",margin:"8px 0"}},{children:[e.favIconUrl&&!e.favIconUrl.startsWith("chrome:")&&i.jsx("img",{alt:"favIcon",src:e.favIconUrl,style:{height:"20px",marginRight:"7px",verticalAlign:"middle",width:"20px"}},void 0),i.jsx("div",Object.assign({className:"col"},{children:i.jsx("span",Object.assign({style:{fontSize:"1.25em",marginRight:"8px",verticalAlign:"middle"}},{children:`${m}${a&&void 0!==b[t]?` (${b[t]})`:""}`}),void 0)}),void 0),i.jsxs("div",Object.assign({className:"col-3",style:{fontSize:"1.1em",textAlign:"center"}},{children:[i.jsx("span",Object.assign({id:"CADCookieText"},{children:browser.i18n.getMessage("popupCookieCountText")}),void 0),": ",i.jsx("span",Object.assign({id:"CADCookieCount",style:{fontWeight:"bold"}},{children:this.state.cookieCount}),void 0)]}),void 0)]}),void 0),h.map((e=>i.jsxs("div",Object.assign({style:{alignItems:"center",display:"flex",margin:"8px 0"},className:"row"},{children:[i.jsx("div",Object.assign({style:{flex:1}},{children:e}),void 0),i.jsxs("div",Object.assign({className:"btn-group",style:{marginLeft:"8px"}},{children:[i.jsx(c.default,{className:"btn-secondary",onClick:()=>{o({expression:l.localFileToRegex(e),listType:"GREY",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toGreyListText"),text:browser.i18n.getMessage("greyListWordText")},void 0),i.jsx(c.default,{className:"btn-primary",onClick:()=>{o({expression:l.localFileToRegex(e),listType:"WHITE",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toWhiteListText"),text:browser.i18n.getMessage("whiteListWordText")},void 0)]}),void 0)]}),e))),i.jsx("div",Object.assign({className:"row",style:{margin:"8px 0"}},{children:i.jsx(p.default,{url:m,storeId:t},void 0)}),void 0),i.jsx(d.default,{numberToShow:3,decisionFilter:1},void 0)]}),void 0)}}t.default=a.connect((e=>({contextualIdentities:l.getSetting(e,"contextualIdentities"),state:e})),(e=>({onUpdateSetting(t){e(r.updateSetting(t))},onNewExpression(t){e(r.addExpressionUI(t))},onCookieCleanup(t){e(r.cookieCleanupUI(t))}})))(x)},8289:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),n=o(8444),a=o(4719),r=o(7459),l=s.__importDefault(o(753));t.default=n.connect((e=>({state:e})),(e=>({onCookieCleanup(t){e(a.cookieCleanupUI(t))}})))((e=>{const{hostname:t,tab:o,state:n,onCookieCleanup:a}=e;return i.jsx("div",Object.assign({className:"row justify-content-center collapse",id:"cleanCollapse",role:"group",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",padding:"4px 4px 8px 4px"}},{children:i.jsxs("div",Object.assign({className:"btn-group-vertical"},{children:[i.jsx(l.default,{btnColor:"btn-warning",onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){return a({greyCleanup:!1,ignoreOpenTabs:!0}),!0})),title:browser.i18n.getMessage("cookieCleanupIgnoreOpenTabsText"),text:browser.i18n.getMessage("cleanIgnoringOpenTabsText")},void 0),i.jsx("button",Object.assign({"aria-disabled":!0,className:"px-2 btn btn-light btn-block text-danger font-weight-bold",disabled:!0,type:"button"},{children:browser.i18n.getMessage("cleanupActionsBypass")}),void 0),i.jsx(l.default,{siteData:"All",hostname:t,tab:o},void 0),i.jsx(l.default,{altColor:!0,siteData:"Cache",hostname:t},void 0),i.jsx(l.default,{onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){return yield r.clearCookiesForThisDomain(n,o)})),title:browser.i18n.getMessage("manualCleanSiteDataCookiesDomain",[t]),text:browser.i18n.getMessage("manualCleanSiteDataCookies")},void 0),i.jsx(l.default,{altColor:!0,siteData:"IndexedDB",hostname:t},void 0),i.jsx(l.default,{onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){return yield r.clearLocalStorageForThisDomain(n,o)})),siteData:"LocalStorage",hostname:t},void 0),i.jsx(l.default,{altColor:!0,siteData:"PluginData",hostname:t},void 0),i.jsx(l.default,{siteData:"ServiceWorkers",hostname:t},void 0)]}),void 0)}),void 0)}))},753:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),n=o(8444),a=o(7459),r=o(7190);t.default=n.connect((e=>({state:e})))((e=>{const{altColor:t,btnColor:o,hostname:n,onClick:l,siteData:d,state:c,tab:u,title:p,text:g}=e,b=s.__rest(e,["altColor","btnColor","hostname","onClick","siteData","state","tab","title","text"]);return i.jsx("button",Object.assign({"aria-controls":"cleanCollapse","aria-expanded":"false",className:`btn ${o||"btn-"+(t?"secondary":"primary")} btn-block px-2`,"data-target":"#cleanCollapse","data-toggle":"collapse",onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){let e=!0;l?e=yield l.apply(this):c&&d&&n&&(e=yield((e,t,o,i)=>s.__awaiter(void 0,void 0,void 0,(function*(){if(!o)return!1;let s=yield a.clearSiteDataForThisDomain(e,t,o);if("All"===t){if(!i)return!1;const t=yield a.clearCookiesForThisDomain(e,i);s=s||t}return s})))(c,d,n,u)),r.animateFlash(document.getElementById("cleanButtonContainer"),e)})),title:p||d&&n&&browser.i18n.getMessage(`manualCleanSiteData${d}Domain`,[n])||"",type:"button"},b,{children:g||browser.i18n.getMessage(`manualCleanSiteData${d}`)}),void 0)}))},5144:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),n=o(8444),a=o(292),r=s.__importDefault(o(3382));t.default=n.connect(((e,t)=>({expressions:a.getMatchedExpressions(e.lists,t.storeId,t.url)})))((e=>{const{expressions:t,storeId:o}=e;return i.jsx(r.default,{expressionColumnTitle:browser.i18n.getMessage("matchedDomainExpressionText"),expressions:t,storeId:o,emptyElement:i.jsx("span",Object.assign({style:{fontStyle:"italic",width:"100%"}},{children:i.jsx("div",Object.assign({className:"alert alert-primary",role:"alert",style:{marginBottom:0}},{children:i.jsx("i",{children:browser.i18n.getMessage("noRulesText")},void 0)}),void 0)}),void 0)},void 0)}))},7325:(e,t,o)=>{const s=o(3940),i=o(7557),n=s.__importDefault(o(3961)),a=o(8444),r=o(7315),l=o(292),d=s.__importDefault(o(877)),c=s.__importDefault(o(5461)),u=s.__importDefault(o(2921));c.default(),function(){s.__awaiter(this,void 0,void 0,(function*(){let e=yield r.createUIStore();for(;!e.getState();)yield l.sleep(250),e=yield r.createUIStore();const t=document.createElement("div");document.body.appendChild(t),l.isChrome(e.getState().cache)&&(yield new Promise((e=>setTimeout(e,100)))),n.default.render(i.jsx(a.Provider,Object.assign({store:e},{children:i.jsx(d.default,{children:i.jsx(u.default,{},void 0)},void 0)}),void 0),t)}))}()},7190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.animateFlash=void 0,t.animateFlash=(e,t)=>{if(e)try{const o=(t?"success":"failure")+"Animated";e.classList.add(o),setTimeout((()=>{e.classList.remove(o)}),1500)}catch(e){}}},7315:e=>{e.exports=ReduxWebExt}},t={};function o(s){if(t[s])return t[s].exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,o.x=e=>{},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={42:0,352:0,314:0},t=[[7325,481,94]],s=e=>{},i=(i,n)=>{for(var a,r,[l,d,c,u]=n,p=0,g=[];p<l.length;p++)r=l[p],o.o(e,r)&&e[r]&&g.push(e[r][0]),e[r]=0;for(a in d)o.o(d,a)&&(o.m[a]=d[a]);for(c&&c(o),i&&i(n);g.length;)g.shift()();return u&&t.push.apply(t,u),s()},n=self.webpackChunkcookie_autodelete=self.webpackChunkcookie_autodelete||[];function a(){for(var s,i=0;i<t.length;i++){for(var n=t[i],a=!0,r=1;r<n.length;r++){var l=n[r];0!==e[l]&&(a=!1)}a&&(t.splice(i--,1),s=o(o.s=n[0]))}return 0===t.length&&(o.x(),o.x=e=>{}),s}n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n));var r=o.x;o.x=()=>(o.x=r||(e=>{}),(s=a)())})(),o.x()})();